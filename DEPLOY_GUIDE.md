# ğŸš€ Cloudflare Pages éƒ¨ç½²æŒ‡å—

## ğŸš¨ é—®é¢˜åˆ†æ

æ ¹æ®æœ€æ–°æ—¥å¿—åˆ†æï¼Œé—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ï¼š

1. âœ… **æ„å»ºæˆåŠŸ** - Next.js æ„å»ºå®Œæˆï¼Œæ— é”™è¯¯
2. âœ… **é™æ€å¯¼å‡ºæˆåŠŸ** - `â—‹ (Static) prerendered as static content`
3. âŒ **å…³é”®é—®é¢˜**: `Error: Output directory "out" not found` - Cloudflare Pages æ‰¾ä¸åˆ°è¾“å‡ºç›®å½•

## ğŸ”§ å·²å®Œæˆçš„ä¿®å¤

### 1. Next.js é…ç½®ä¼˜åŒ–
- âœ… æ·»åŠ  `distDir: 'out'` æ˜ç¡®æŒ‡å®šè¾“å‡ºç›®å½•
- âœ… ä¿æŒ `output: 'export'` é™æ€å¯¼å‡º
- âœ… ä¼˜åŒ–æ„å»ºé…ç½®

### 2. æ„å»ºè„šæœ¬
- âœ… åˆ›å»º `build.sh` è„šæœ¬éªŒè¯æ„å»ºè¿‡ç¨‹
- âœ… ç¡®ä¿è¾“å‡ºç›®å½•æ­£ç¡®ç”Ÿæˆ
- âœ… éªŒè¯å…³é”®æ–‡ä»¶å­˜åœ¨

### 3. é…ç½®æ–‡ä»¶
- âœ… `cloudflare-pages.json` - Cloudflare Pages é…ç½®
- âœ… `_headers` - å®‰å…¨å¤´å’Œç¼“å­˜é…ç½®
- âœ… `_redirects` - é‡å®šå‘è§„åˆ™
- âœ… `.nvmrc` - Node.js ç‰ˆæœ¬æŒ‡å®š

## ğŸ¯ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šCloudflare Dashboardï¼ˆæ¨èï¼‰

1. **è¿›å…¥ Cloudflare Dashboard**
   - è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/)
   - é€‰æ‹©ä½ çš„ Pages é¡¹ç›®

2. **æ›´æ–°æ„å»ºè®¾ç½®**
   - è¿›å…¥ "Settings" â†’ "Builds & deployments"
   - ç¡®ä¿æ„å»ºè®¾ç½®å¦‚ä¸‹ï¼š

   ```
   Framework preset: Next.js (Static HTML Export)
   Build command: npm run build
   Build output directory: out
   Root directory: /
   Node.js version: 20
   ```

3. **é‡æ–°éƒ¨ç½²**
   - ç‚¹å‡» "Retry deployment"
   - æˆ–ç‚¹å‡» "Create deployment"

### æ–¹æ³•äºŒï¼šGit æ¨é€ï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰

æˆ‘å·²ç»æäº¤äº†æ‰€æœ‰ä¿®å¤ï¼Œä½ å¯ä»¥æ¨é€ä»£ç ï¼š

```bash
git push origin main
```

è¿™å°†è‡ªåŠ¨è§¦å‘ Cloudflare Pages é‡æ–°éƒ¨ç½²ã€‚

## ğŸ“‹ éªŒè¯æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥
- [x] Next.js é…ç½®æ­£ç¡® (`output: 'export'`, `distDir: 'out'`)
- [x] æœ¬åœ°æ„å»ºæˆåŠŸ (`npm run build`)
- [x] è¾“å‡ºç›®å½•å­˜åœ¨ (`ls out/`)
- [x] å…³é”®æ–‡ä»¶å­˜åœ¨ (`index.html`, `_next/`)
- [x] æ„å»ºè„šæœ¬éªŒè¯é€šè¿‡ (`./build.sh`)

### éƒ¨ç½²åéªŒè¯
- [ ] æ„å»ºæ—¥å¿—æ˜¾ç¤ºæˆåŠŸ
- [ ] è¾“å‡ºç›®å½•è¢«æ­£ç¡®è¯†åˆ«
- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] é™æ€èµ„æºåŠ è½½æ­£å¸¸

## ğŸ” è°ƒè¯•å‘½ä»¤

### æœ¬åœ°éªŒè¯
```bash
# ä½¿ç”¨æ„å»ºè„šæœ¬éªŒè¯
./build.sh

# æ‰‹åŠ¨éªŒè¯
npm run build
ls -la out/
ls -la out/index.html
ls -la out/_next/
```

### æ£€æŸ¥æ„å»ºè¾“å‡º
```bash
# æŸ¥çœ‹æ„å»ºè¾“å‡ºç»“æ„
find out -type f -name "*.html" | head -5
find out -type f -name "*.js" | head -5
```

## ğŸ‰ é¢„æœŸç»“æœ

ä¿®å¤åï¼Œéƒ¨ç½²åº”è¯¥æˆåŠŸï¼Œä½ çš„åº”ç”¨å°†åœ¨ä»¥ä¸‹åœ°å€å¯ç”¨ï¼š
- **é»˜è®¤åœ°å€**: `https://life-recorder.pages.dev`
- **è‡ªå®šä¹‰åŸŸå**: `https://your-domain.com`

## ğŸ“š å…³é”®ä¿®å¤è¯´æ˜

### ä¸ºä»€ä¹ˆæ·»åŠ  `distDir: 'out'`ï¼Ÿ

1. **æ˜ç¡®æŒ‡å®šè¾“å‡ºç›®å½•**
   - Next.js 15 åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¸ç”Ÿæˆé»˜è®¤çš„ `out` ç›®å½•
   - æ˜ç¡®æŒ‡å®šç¡®ä¿è¾“å‡ºç›®å½•æ­£ç¡®

2. **Cloudflare Pages å…¼å®¹æ€§**
   - ç¡®ä¿ Cloudflare Pages èƒ½æ­£ç¡®è¯†åˆ«è¾“å‡ºç›®å½•
   - é¿å…ç›®å½•æŸ¥æ‰¾é—®é¢˜

3. **æ„å»ºä¸€è‡´æ€§**
   - æœ¬åœ°å’Œäº‘ç«¯æ„å»ºç»“æœä¸€è‡´
   - å‡å°‘éƒ¨ç½²å¤±è´¥çš„å¯èƒ½æ€§

### æ„å»ºè„šæœ¬çš„ä½œç”¨

1. **éªŒè¯æ„å»ºè¿‡ç¨‹**
   - ç¡®ä¿æ‰€æœ‰æ­¥éª¤æ­£ç¡®æ‰§è¡Œ
   - æ£€æŸ¥è¾“å‡ºç›®å½•å’Œå…³é”®æ–‡ä»¶

2. **è°ƒè¯•éƒ¨ç½²é—®é¢˜**
   - å¿«é€Ÿå®šä½æ„å»ºé—®é¢˜
   - éªŒè¯é…ç½®æ­£ç¡®æ€§

3. **è‡ªåŠ¨åŒ–éªŒè¯**
   - å‡å°‘æ‰‹åŠ¨æ£€æŸ¥æ­¥éª¤
   - æé«˜éƒ¨ç½²æˆåŠŸç‡

## ğŸš€ ä¸‹ä¸€æ­¥

1. **æ¨é€ä»£ç **ï¼ˆå¦‚æœè¿˜æ²¡æ¨é€ï¼‰
   ```bash
   git push origin main
   ```

2. **æ£€æŸ¥ Cloudflare Dashboard**
   - ç¡®ä¿æ„å»ºè®¾ç½®æ­£ç¡®
   - ç›‘æ§éƒ¨ç½²è¿›åº¦

3. **éªŒè¯éƒ¨ç½²ç»“æœ**
   - è®¿é—®åº”ç”¨ URL
   - æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

---

**é‡è¦æé†’**ï¼šå¦‚æœéƒ¨ç½²ä»ç„¶å¤±è´¥ï¼Œè¯·åˆ†äº«æ–°çš„æ„å»ºæ—¥å¿—ï¼Œæˆ‘ä¼šç»§ç»­åˆ†æå’Œä¿®å¤ï¼
