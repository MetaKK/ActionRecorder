# 多模态导出格式说明

## 📝 格式对比

### 1. 纯文本格式 (Text) - AI 对话友好

**特点：**
- ✅ 简洁清晰，适合复制到 AI 对话
- ✅ 多模态内容用占位符表示
- ✅ 易于阅读和理解
- ✅ 文件体积最小

**示例：**

```text
2025-10-14 (今天)
────────────────────────────────────────

[14:23] 今天天气不错，去公园散步了 [音频 0:15] [3张图片]
  📍 杭州市 西湖区 文三路

[09:30] 早餐吃了全麦面包和牛奶
  📍 杭州市 西湖区

```

---

### 2. Markdown 格式 - 文档友好

**特点：**
- ✅ 富文本格式，支持标题、列表、引用
- ✅ 多模态内容用引用块表示
- ✅ 包含详细的位置坐标
- ✅ 适合存档和分享

**示例：**

```markdown
# 生活记录

## 2025-10-14 · 今天

**14:23** · 📍 杭州市 西湖区 文三路

今天天气不错，去公园散步了

> 🎵 音频 (0:15)
> 📷 图片1 (1920×1080)
> 📷 图片2 (1920×1080)
> 📷 图片3 (1920×1080)

<sub>坐标: 30.287459, 120.153576</sub>

---

**09:30** · 📍 杭州市 西湖区

早餐吃了全麦面包和牛奶

---

```

---

### 3. JSON 格式 - 完整数据备份

**特点：**
- ✅ 完整的数据结构
- ✅ 包含所有元数据
- ✅ 适合程序处理和数据迁移
- ✅ 可以重新导入（未来功能）

**示例：**

```json
{
  "version": "1.0",
  "exportedAt": "2025-10-14T06:30:00.000Z",
  "timeRange": "all",
  "totalRecords": 2,
  "records": [
    {
      "id": "1728901380000-abc123",
      "content": "今天天气不错，去公园散步了",
      "timestamp": 1728901380000,
      "createdAt": "2025-10-14T06:23:00.000Z",
      "updatedAt": "2025-10-14T06:23:00.000Z",
      "location": {
        "latitude": 30.287459,
        "longitude": 120.153576,
        "accuracy": 10,
        "address": "文三路",
        "city": "杭州市",
        "district": "西湖区",
        "street": "文三路"
      },
      "audio": {
        "duration": 15,
        "format": "audio/webm",
        "hasData": true
      },
      "images": [
        {
          "id": "img-1",
          "width": 1920,
          "height": 1080,
          "size": 245760,
          "type": "image/jpeg",
          "createdAt": "2025-10-14T06:23:00.000Z"
        },
        {
          "id": "img-2",
          "width": 1920,
          "height": 1080,
          "size": 245760,
          "type": "image/jpeg",
          "createdAt": "2025-10-14T06:23:00.000Z"
        },
        {
          "id": "img-3",
          "width": 1920,
          "height": 1080,
          "size": 245760,
          "type": "image/jpeg",
          "createdAt": "2025-10-14T06:23:00.000Z"
        }
      ]
    },
    {
      "id": "1728883800000-def456",
      "content": "早餐吃了全麦面包和牛奶",
      "timestamp": 1728883800000,
      "createdAt": "2025-10-14T01:30:00.000Z",
      "updatedAt": "2025-10-14T01:30:00.000Z",
      "location": {
        "latitude": 30.287123,
        "longitude": 120.153321,
        "accuracy": 15,
        "city": "杭州市",
        "district": "西湖区"
      }
    }
  ]
}
```

---

## 🎯 使用场景推荐

| 格式 | 推荐场景 | 优势 |
|------|---------|------|
| **纯文本** | • 复制到 ChatGPT/Claude<br>• 快速浏览<br>• 日常回顾 | 简洁、清晰、易读 |
| **Markdown** | • 长期存档<br>• 分享给他人<br>• 博客文章 | 格式优美、易于编辑 |
| **JSON** | • 数据备份<br>• 迁移到其他应用<br>• 程序处理 | 结构完整、易于解析 |

---

## 📊 多模态内容处理

### 音频标记

| 格式 | 表示方式 | 示例 |
|------|---------|------|
| 纯文本 | `[音频 时长]` | `[音频 0:15]` |
| Markdown | `> 🎵 音频 (时长)` | `> 🎵 音频 (0:15)` |
| JSON | 元数据对象 | `{ "duration": 15, ... }` |

### 图片标记

| 格式 | 单张图片 | 多张图片 |
|------|---------|---------|
| 纯文本 | `[图片 宽×高]` | `[3张图片]` |
| Markdown | `> 📷 图片 (宽×高)` | 每张单独一行 |
| JSON | 元数据数组 | 完整信息列表 |

### 位置信息

| 格式 | 表示方式 |
|------|---------|
| 纯文本 | `📍 城市 区域 街道` |
| Markdown | 同一行 + 底部坐标 |
| JSON | 完整的位置对象 |

---

## 🚀 快速开始

1. **选择导出格式**
   - AI对话 → 纯文本
   - 文档存档 → Markdown
   - 数据备份 → JSON

2. **选择时间范围**
   - 今天 / 最近7天 / 最近30天 / 全部

3. **预览内容**
   - 实时查看导出结果

4. **复制或下载**
   - 复制到剪贴板（快速使用）
   - 下载为文件（长期保存）

---

## 💡 最佳实践

### ✅ 推荐做法

1. **日常使用**
   - 复制纯文本格式到 AI 对话
   - 快速获取生活洞察

2. **定期备份**
   - 每月导出 JSON 格式
   - 保存完整数据

3. **年度总结**
   - 导出 Markdown 格式
   - 创建精美文档

### ❌ 不推荐

1. ~~用 JSON 复制到 AI（不易读）~~
2. ~~频繁导出全部数据（性能影响）~~
3. ~~不备份直接删除旧记录~~

---

## 📈 导出优化

### 性能优化

- ✅ 纯文本格式不包含 Base64 数据
- ✅ JSON 格式只包含元数据，不包含实际音频/图片
- ✅ 按需导出，支持时间范围筛选

### 体积对比

| 100条记录 | 纯文本 | Markdown | JSON |
|----------|--------|----------|------|
| 仅文本 | ~5KB | ~8KB | ~15KB |
| 含音频标记 | ~6KB | ~10KB | ~18KB |
| 含图片标记 | ~7KB | ~12KB | ~20KB |

---

## 🔧 技术实现

### 架构设计

```typescript
// 统一导出接口
exportRecords(records, timeRange, format)
  ├─ formatRecordsAsText()      // 纯文本
  ├─ formatRecordsAsMarkdown()  // Markdown
  └─ formatRecordsAsJSON()      // JSON

// 文件名生成
generateFilename(format)
  → life-records-2025-10-14.{txt|md|json}

// 下载处理
downloadAsFile(content, filename, format)
  → 自动选择正确的 MIME 类型
```

### 代码质量

- ✅ TypeScript 类型安全
- ✅ 函数式编程
- ✅ 单一职责原则
- ✅ 易于扩展

---

## 🎉 总结

新的导出功能提供了：

1. **3种格式选择** - 满足不同使用场景
2. **多模态支持** - 文本、音频、图片、位置
3. **简洁高效** - 去除冗余统计，突出内容
4. **AI友好** - 优化纯文本格式
5. **完整备份** - JSON 格式保存所有元数据

---

**立即体验优化后的导出功能！** 📥✨

