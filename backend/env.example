# ============================================
# Life Recorder Backend - Environment Variables
# ============================================

# ============================================
# Server Configuration
# ============================================
NODE_ENV=development
PORT=4000
LOG_LEVEL=info

# ============================================
# Database (PostgreSQL)
# ============================================
# Neon (Recommended): https://neon.tech
# Railway: https://railway.app
# Supabase: https://supabase.com
DATABASE_URL="postgresql://user:password@host:5432/dbname?sslmode=require"
# For migrations (Neon only)
DIRECT_URL="postgresql://user:password@host:5432/dbname?sslmode=require"

# ============================================
# JWT Authentication
# ============================================
# Generate a secure random string (min 32 chars)
# Example: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-min-32-chars-long-replace-this"
JWT_EXPIRES_IN=7d

# ============================================
# Cloudflare R2 Storage
# ============================================
# https://dash.cloudflare.com/r2
R2_ACCOUNT_ID="your-cloudflare-account-id"
R2_ACCESS_KEY_ID="your-r2-access-key-id"
R2_SECRET_ACCESS_KEY="your-r2-secret-access-key"
R2_BUCKET_NAME="life-recorder"
R2_ENDPOINT="https://your-account-id.r2.cloudflarestorage.com"
R2_PUBLIC_URL="https://your-bucket.r2.dev"

# ============================================
# Redis Cache (Optional)
# ============================================
# Upstash (Free): https://upstash.com
# Leave empty to disable rate limiting
REDIS_URL=""
# Example: "rediss://default:xxx@upstash.io:6379"

# ============================================
# AI API Keys (Optional)
# ============================================
# For AI proxy feature
OPENAI_API_KEY=""
ANTHROPIC_API_KEY=""
DOUBAO_API_KEY=""

# ============================================
# CORS Configuration
# ============================================
# Frontend URL(s) - comma separated for multiple
CORS_ORIGIN="http://localhost:3000"
# Production example: "https://your-app.vercel.app,https://your-domain.com"

# ============================================
# File Upload Configuration
# ============================================
MAX_FILE_SIZE=52428800  # 50MB in bytes
MAX_FILES_PER_UPLOAD=10

# ============================================
# Rate Limiting (requires Redis)
# ============================================
RATE_LIMIT_WINDOW_MS=900000      # 15 minutes
RATE_LIMIT_MAX_REQUESTS_FREE=100  # Free tier
RATE_LIMIT_MAX_REQUESTS_PREMIUM=1000  # Premium tier

